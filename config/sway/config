# config for sway
# tescu -- https://github.com/tescu/dots

set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $term foot
set $menu wmenu-run
set $scripts $HOME/.local/bin
set $fzf footfzf
# Colors
set $fg #ffffff
set $bg #000000
set $gr #7a7a7a
set $br #36af4390
set $hl #36af43

gaps inner 0
gaps outer 0
output * bg $HOME/.local/etc/wall fill

### Idle configuration
#exec swayidle -w \
#	timeout 300 'swaylock -f -c 000000' \
#	timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
#	before-sleep 'swaylock -f -c 000000'

# Input configuration
input "type:touchpad" {
    dwt enabled
    tap enabled
    natural_scroll enabled
    middle_emulation enabled
}
input * {
    xkb_layout "ro,de"
    xkb_options "grp:rctrl_toggle"
}

# Rules
# Make all fzf/input terminal windows behave more like dmenu
for_window [app_id="$fzf"] floating enable; border none

# Key bindings
floating_modifier $mod normal
bindsym $mod+Shift+c kill
bindsym $mod+Shift+r reload

bindsym $mod+d exec $menu
bindsym $mod+Return exec $term

# Exit session
bindsym $mod+Shift+e exec swaynag -t warning -m 'Terminati sesiunea?' -B 'Da' 'swaymsg exit'
# Turn off
bindsym $mod+Shift+q exec $term -a $fzf $scripts/pwroff

# Moving
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
# Resizing
bindsym $mod+u resize shrink width  40px
bindsym $mod+i resize grow height   40px
bindsym $mod+o resize shrink height 40px
bindsym $mod+p resize grow width    40px
# Workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
# Layout
bindsym $mod+v splitt
bindsym $mod+Shift+v layout toggle split
bindsym $mod+f fullscreen
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent
# Scratchpad:
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show
# Extra
# Volume (PulseAudio)
bindsym --locked XF86AudioMute exec pactl set-sink-mute \@DEFAULT_SINK@ toggle
bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume \@DEFAULT_SINK@ -5%
bindsym --locked XF86AudioRaiseVolume exec pactl set-sink-volume \@DEFAULT_SINK@ +5%
bindsym --locked XF86AudioMicMute exec pactl set-source-mute \@DEFAULT_SOURCE@ toggle
# Brightness
bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym --locked XF86MonBrightnessUp exec brightnessctl set 5%+
# Screenshots
bindsym Print exec grim
bindsym $mod+9 exec grim
bindsym $mod+8 exec grim -g "$(slurp)"
# Wallpaper
bindsym $mod+0 exec $scripts/wpmenu
#bindsym $mod+Shift+9 exec $scripts/wpset
# Mounting
bindsym $mod+m exec $term -a $fzf $scripts/mounter
bindsym $mod+Shift+m exec $term -a $fzf $scripts/unmounter
# Emoji/Symbols
bindsym $mod+w exec $scripts/pickerm
bindsym $mod+Shift+w exec $scripts/pickerm lenny
# Music
bindsym $mod+s exec $scripts/mplc sk && notify-send 'ðŸŽµ' 'Skipped track.'
bindsym $mod+Shift+s exec $scripts/mplc st && notify-send 'ðŸ›‘ðŸŽµ' 'Music stopped.'

# Gaps
mode "gaps" {
	bindsym $up gaps inner all plus 5
	bindsym $down gaps inner all minus 5

	bindsym q mode default
	bindsym Escape mode default
	bindsym Return mode default
}
bindsym $mod+Shift+g mode "gaps"

# Theme (border, bg, text, ind., border 2)
client.focused          $bg $bg $fg $hl $br
client.focused_inactive $bg $bg $fg $hl $bg
client.unfocused        $bg $bg $gr $gr $bg 
default_border pixel 2

# Bar
bar {
    position bottom
    status_command i3blocks

    colors {
        statusline $fg
        background $bg
	focused_workspace  $hl $hl $fg
        inactive_workspace $bg $bg $gr
    }
}

# Autostart
exec fnott

include /etc/sway/config.d/*
